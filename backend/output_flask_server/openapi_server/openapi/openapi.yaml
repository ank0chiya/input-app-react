openapi: 3.0.0
info:
  description: API for managing products and attributes. Params are managed via dedicated
    endpoints. Attribute creation/update does not include params list directly. Schema
    key names updated to snake_case. Attribute key 'attribute' renamed to 'code'.
  title: Sample Product API
  version: v1.3.1
servers:
- description: Development server
  url: http://localhost:8080/api
tags:
- description: Product related operations
  name: Products
- description: Attribute related operations
  name: Attributes
- description: Parameter related operations
  name: Parameters
- description: Utility operations for the mock server
  name: Utilities
paths:
  /products:
    get:
      operationId: list_products
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Product'
                type: array
          description: A list of all products.
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: An unexpected error occurred on the server.
      summary: List all products
      tags:
      - Products
      x-openapi-router-controller: openapi_server.controllers.products_controller
  /products/{productId}:
    get:
      operationId: get_product_by_id
      parameters:
      - explode: false
        in: path
        name: productId
        required: true
        schema:
          type: integer
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
          description: The requested product.
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: The specified resource was not found.
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: An unexpected error occurred on the server.
      summary: Get a specific product by its ID
      tags:
      - Products
      x-openapi-router-controller: openapi_server.controllers.products_controller
  /products/{productId}/attributes:
    post:
      operationId: add_attribute
      parameters:
      - explode: false
        in: path
        name: productId
        required: true
        schema:
          type: integer
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AttributeInput'
        description: The attribute to add. `attribute_id` and `params` list are server-managed
          and should not be provided.
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Attribute'
          description: Attribute created successfully. Returns the created attribute
            (params will be an empty array initially).
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: The request was malformed or invalid.
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: Product not found.
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: An unexpected error occurred on the server.
      summary: Add a new attribute to a specific product (without params)
      tags:
      - Attributes
      x-openapi-router-controller: openapi_server.controllers.attributes_controller
  /products/{productId}/attributes/{attributeId}:
    delete:
      operationId: delete_attribute
      parameters:
      - explode: false
        in: path
        name: productId
        required: true
        schema:
          type: integer
        style: simple
      - explode: false
        in: path
        name: attributeId
        required: true
        schema:
          type: integer
        style: simple
      responses:
        "204":
          description: Attribute deleted successfully.
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: Product or Attribute not found.
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: An unexpected error occurred on the server.
      summary: Delete a specific attribute from a product
      tags:
      - Attributes
      x-openapi-router-controller: openapi_server.controllers.attributes_controller
    put:
      operationId: update_attribute
      parameters:
      - explode: false
        in: path
        name: productId
        required: true
        schema:
          type: integer
        style: simple
      - explode: false
        in: path
        name: attributeId
        required: true
        schema:
          type: integer
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AttributeInput'
        description: The updated attribute data. `attribute_id` is from the path.
          `params` list is not modified by this endpoint.
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Attribute'
          description: "Attribute updated successfully. Returns the updated attribute\
            \ (params list reflects current state, not directly changed by this PUT)."
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: The request was malformed or invalid.
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: Product or Attribute not found.
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: An unexpected error occurred on the server.
      summary: Update an existing attribute of a specific product (without managing
        params list directly)
      tags:
      - Attributes
      x-openapi-router-controller: openapi_server.controllers.attributes_controller
  /products/{productId}/attributes/{attributeId}/params:
    post:
      operationId: add_param
      parameters:
      - explode: false
        in: path
        name: productId
        required: true
        schema:
          type: integer
        style: simple
      - explode: false
        in: path
        name: attributeId
        required: true
        schema:
          type: integer
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ParamItemInput'
        description: The parameter to add. `param_id` will be assigned by the server.
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParamItem'
          description: Parameter created successfully.
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: The request was malformed or invalid.
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: Product or Attribute not found.
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: An unexpected error occurred on the server.
      summary: Add a new parameter to a specific attribute
      tags:
      - Parameters
      x-openapi-router-controller: openapi_server.controllers.parameters_controller
  /products/{productId}/attributes/{attributeId}/params/{paramId}:
    delete:
      operationId: delete_param
      parameters:
      - explode: false
        in: path
        name: productId
        required: true
        schema:
          type: integer
        style: simple
      - explode: false
        in: path
        name: attributeId
        required: true
        schema:
          type: integer
        style: simple
      - explode: false
        in: path
        name: paramId
        required: true
        schema:
          type: integer
        style: simple
      responses:
        "204":
          description: Parameter deleted successfully.
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: "Product, Attribute, or Parameter not found."
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: An unexpected error occurred on the server.
      summary: Delete a specific parameter from an attribute
      tags:
      - Parameters
      x-openapi-router-controller: openapi_server.controllers.parameters_controller
    put:
      operationId: update_param
      parameters:
      - explode: false
        in: path
        name: productId
        required: true
        schema:
          type: integer
        style: simple
      - explode: false
        in: path
        name: attributeId
        required: true
        schema:
          type: integer
        style: simple
      - explode: false
        in: path
        name: paramId
        required: true
        schema:
          type: integer
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ParamItemInput'
        description: The updated parameter data. `param_id` is from the path.
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParamItem'
          description: Parameter updated successfully.
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: The request was malformed or invalid.
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: "Product, Attribute, or Parameter not found."
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: An unexpected error occurred on the server.
      summary: Update an existing parameter of a specific attribute
      tags:
      - Parameters
      x-openapi-router-controller: openapi_server.controllers.parameters_controller
  /refresh:
    post:
      operationId: refresh_mock_data
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/refreshMockData_200_response'
          description: Mock data has been successfully reset.
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: Internal server error occurred during data reset.
      summary: Reset all mock data to its initial state
      tags:
      - Utilities
      x-openapi-router-controller: openapi_server.controllers.utilities_controller
components:
  parameters:
    ProductIdParameter:
      explode: false
      in: path
      name: productId
      required: true
      schema:
        type: integer
      style: simple
    AttributeIdParameter:
      explode: false
      in: path
      name: attributeId
      required: true
      schema:
        type: integer
      style: simple
    ParamIdParameter:
      explode: false
      in: path
      name: paramId
      required: true
      schema:
        type: integer
      style: simple
  responses:
    NotFound:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
      description: The specified resource was not found.
    BadRequest:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
      description: The request was malformed or invalid.
    InternalServerError:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
      description: An unexpected error occurred on the server.
  schemas:
    ParamBase:
      properties:
        param_id:
          description: Unique identifier for the parameter.
          readOnly: true
          title: param_id
          type: integer
        sort_order:
          title: sort_order
          type: integer
      required:
      - param_id
      - sort_order
      title: ParamBase
      type: object
    ParamType1Item:
      allOf:
      - $ref: '#/components/schemas/ParamBase'
      - properties:
          type:
            enum:
            - type1
            type: string
          code:
            type: string
          disp_name:
            type: string
        required:
        - code
        - disp_name
        - type
        type: object
      example:
        code: code
        disp_name: disp_name
        type: type1
        sort_order: 5
        param_id: 1
      title: ParamType1Item
    ParamType2Item:
      allOf:
      - $ref: '#/components/schemas/ParamBase'
      - properties:
          type:
            enum:
            - type2
            type: string
          min:
            type: integer
          increment:
            type: integer
        required:
        - increment
        - min
        - type
        type: object
      title: ParamType2Item
    ParamType3Item:
      allOf:
      - $ref: '#/components/schemas/ParamBase'
      - properties:
          type:
            enum:
            - type3
            type: string
          code:
            type: string
          disp_name:
            type: string
        required:
        - code
        - disp_name
        - type
        type: object
      title: ParamType3Item
    ParamItem:
      discriminator:
        mapping:
          type1: '#/components/schemas/ParamType1Item'
          type2: '#/components/schemas/ParamType2Item'
          type3: '#/components/schemas/ParamType3Item'
        propertyName: type
      oneOf:
      - $ref: '#/components/schemas/ParamType1Item'
      - $ref: '#/components/schemas/ParamType2Item'
      - $ref: '#/components/schemas/ParamType3Item'
      title: ParamItem
    Attribute:
      example:
        unit: unit
        masking: true
        code: code
        public: true
        attribute_id: 6
        contract: contract
        data_type: data_type
        disp_name: disp_name
        online: true
        params:
        - code: code
          disp_name: disp_name
          type: type1
          sort_order: 5
          param_id: 1
        - code: code
          disp_name: disp_name
          type: type1
          sort_order: 5
          param_id: 1
        sort_order: 5
      properties:
        attribute_id:
          readOnly: true
          title: attribute_id
          type: integer
        code:
          description: Code identifier for the attribute (formerly 'attribute').
          title: code
          type: string
        data_type:
          title: data_type
          type: string
        disp_name:
          title: disp_name
          type: string
        unit:
          title: unit
          type: string
        params:
          description: "List of parameters. Managed via /params endpoint. Included\
            \ in GET, empty on new attribute creation."
          items:
            $ref: '#/components/schemas/ParamItem'
          title: params
          type: array
        contract:
          title: contract
          type: string
        public:
          title: public
          type: boolean
        masking:
          title: masking
          type: boolean
        online:
          title: online
          type: boolean
        sort_order:
          title: sort_order
          type: integer
      required:
      - attribute_id
      - code
      - contract
      - data_type
      - disp_name
      - masking
      - online
      - params
      - public
      - sort_order
      - unit
      title: Attribute
      type: object
    Product:
      example:
        cfg_type: cfg_type
        prefix: prefix
        prd_type: prd_type
        attributes:
        - unit: unit
          masking: true
          code: code
          public: true
          attribute_id: 6
          contract: contract
          data_type: data_type
          disp_name: disp_name
          online: true
          params:
          - code: code
            disp_name: disp_name
            type: type1
            sort_order: 5
            param_id: 1
          - code: code
            disp_name: disp_name
            type: type1
            sort_order: 5
            param_id: 1
          sort_order: 5
        - unit: unit
          masking: true
          code: code
          public: true
          attribute_id: 6
          contract: contract
          data_type: data_type
          disp_name: disp_name
          online: true
          params:
          - code: code
            disp_name: disp_name
            type: type1
            sort_order: 5
            param_id: 1
          - code: code
            disp_name: disp_name
            type: type1
            sort_order: 5
            param_id: 1
          sort_order: 5
        sort_order: 2
        prod_id: 0
      properties:
        prod_id:
          readOnly: true
          title: prod_id
          type: integer
        prefix:
          title: prefix
          type: string
        prd_type:
          title: prd_type
          type: string
        cfg_type:
          title: cfg_type
          type: string
        attributes:
          items:
            $ref: '#/components/schemas/Attribute'
          title: attributes
          type: array
        sort_order:
          title: sort_order
          type: integer
      required:
      - attributes
      - cfg_type
      - prd_type
      - prefix
      - prod_id
      - sort_order
      title: Product
      type: object
    ParamBaseInput:
      properties:
        sort_order:
          title: sort_order
          type: integer
      required:
      - sort_order
      title: ParamBaseInput
      type: object
    ParamType1ItemInput:
      allOf:
      - $ref: '#/components/schemas/ParamBaseInput'
      - properties:
          type:
            enum:
            - type1
            type: string
          code:
            type: string
          disp_name:
            type: string
        required:
        - code
        - disp_name
        - type
        type: object
      example:
        code: code
        disp_name: disp_name
        type: type1
        sort_order: 0
      title: ParamType1ItemInput
    ParamType2ItemInput:
      allOf:
      - $ref: '#/components/schemas/ParamBaseInput'
      - properties:
          type:
            enum:
            - type2
            type: string
          min:
            type: integer
          increment:
            type: integer
        required:
        - increment
        - min
        - type
        type: object
      title: ParamType2ItemInput
    ParamType3ItemInput:
      allOf:
      - $ref: '#/components/schemas/ParamBaseInput'
      - properties:
          type:
            enum:
            - type3
            type: string
          code:
            type: string
          disp_name:
            type: string
        required:
        - code
        - disp_name
        - type
        type: object
      title: ParamType3ItemInput
    ParamItemInput:
      discriminator:
        mapping:
          type1: '#/components/schemas/ParamType1ItemInput'
          type2: '#/components/schemas/ParamType2ItemInput'
          type3: '#/components/schemas/ParamType3ItemInput'
        propertyName: type
      oneOf:
      - $ref: '#/components/schemas/ParamType1ItemInput'
      - $ref: '#/components/schemas/ParamType2ItemInput'
      - $ref: '#/components/schemas/ParamType3ItemInput'
      title: ParamItemInput
    AttributeInput:
      example:
        unit: unit
        masking: true
        code: code
        public: true
        contract: contract
        data_type: data_type
        disp_name: disp_name
        online: true
        sort_order: 0
      properties:
        code:
          description: Code identifier for the attribute (formerly 'attribute').
          title: code
          type: string
        data_type:
          title: data_type
          type: string
        disp_name:
          title: disp_name
          type: string
        unit:
          title: unit
          type: string
        contract:
          title: contract
          type: string
        public:
          title: public
          type: boolean
        masking:
          title: masking
          type: boolean
        online:
          title: online
          type: boolean
        sort_order:
          title: sort_order
          type: integer
      required:
      - code
      - contract
      - data_type
      - disp_name
      - masking
      - online
      - public
      - sort_order
      - unit
      title: AttributeInput
      type: object
    Error:
      example:
        code: code
        message: message
      properties:
        message:
          title: message
          type: string
        code:
          title: code
          type: string
      required:
      - message
      title: Error
      type: object
    refreshMockData_200_response:
      example:
        message: Mock data has been reset to the initial state.
      properties:
        message:
          example: Mock data has been reset to the initial state.
          title: message
          type: string
      title: refreshMockData_200_response
      type: object
